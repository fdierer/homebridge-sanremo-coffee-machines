{
  "pluginAlias": "SanremoCoffeeMachines",
  "pluginType": "platform",
  "singular": false,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "required": true,
        "default": "SanremoCoffeeMachines"
      },
      "debugLogging": {
        "title": "Enable Debug Logging",
        "type": "boolean",
        "default": false,
        "description": "When enabled, additional diagnostic messages are written to the Homebridge logs to help troubleshoot connectivity issues."
      },
      "machines": {
        "title": "Coffee Machines",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "title": "Machine Name",
              "type": "string",
              "required": true,
              "default": "Sanremo Cube",
              "description": "The name that will appear in HomeKit"
            },
            "type": {
              "title": "Machine Type",
              "type": "string",
              "required": true,
              "default": "Cube",
              "enum": ["Cube"],
              "description": "Currently only 'Cube' is supported"
            },
            "ip": {
              "title": "IP Address",
              "type": "string",
              "required": true,
              "format": "ipv4",
              "placeholder": "192.168.1.100",
              "description": "Static IP address of the coffee machine"
            },
            "pollingInterval": {
              "title": "Polling Interval (seconds)",
              "type": "integer",
              "default": 30,
              "minimum": 5,
              "maximum": 300,
              "description": "How often to check machine status (5-300 seconds). Lower values = faster updates but more network traffic."
            },
            "enablePowerSwitch": {
              "title": "Enable Power Switch",
              "type": "boolean",
              "default": false,
              "description": "Add an optional HomeKit Switch service for power control. When enabled, a separate 'Sanremo Cube Power' switch will appear in HomeKit."
            },
            "filterLifeDays": {
              "title": "Filter Life (days)",
              "type": "integer",
              "default": 180,
              "minimum": 1,
              "maximum": 365,
              "description": "Expected filter life in days. Used for filter maintenance reminders."
            }
          }
        }
      }
    }
  },
  "layout": [
    {
      "type": "flex",
      "flex-flow": "row wrap",
      "items": [
        "name",
        "debugLogging"
      ]
    },
    {
      "key": "machines",
      "type": "array",
      "orderable": false,
      "buttonText": "Add Machine",
      "items": [
        "machines[].name",
        "machines[].type",
        "machines[].ip",
        "machines[].pollingInterval",
        "machines[].enablePowerSwitch",
        "machines[].filterLifeDays"
      ]
    }
  ]
}

