{
  "pluginAlias": "SanremoCoffeeMachines",
  "pluginType": "platform",
  "singular": false,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "required": true,
        "default": "SanremoCoffeeMachines",
        "description": "A name for this platform instance. You can use any name you prefer, or leave the default."
      },
      "debugLogging": {
        "title": "Enable Debug Logging",
        "type": "boolean",
        "default": false,
        "description": "When enabled, additional diagnostic messages are written to the Homebridge logs to help troubleshoot connectivity issues."
      },
      "machines": {
        "title": "Coffee Machines",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "name": {
              "title": "Machine Name",
              "type": "string",
              "required": true,
              "default": "Sanremo Cube",
              "description": "The name that will appear in HomeKit for this coffee machine. This is the accessory name shown in the Apple Home app."
            },
            "type": {
              "title": "Machine Type",
              "type": "string",
              "required": true,
              "default": "Cube",
              "enum": ["Cube"],
              "description": "The model of Sanremo coffee machine. Currently only 'Cube' is supported. This field is required."
            },
            "ip": {
              "title": "IP Address",
              "type": "string",
              "required": true,
              "format": "ipv4",
              "placeholder": "192.168.1.100",
              "description": "The static IPv4 address of your Sanremo Cube coffee machine. The machine must be on the same network as Homebridge and have a static IP address assigned. This field is required."
            },
            "pollingInterval": {
              "title": "Polling Interval (seconds)",
              "type": "integer",
              "default": 30,
              "minimum": 5,
              "maximum": 300,
              "description": "How often the plugin checks the coffee machine status (5-300 seconds). Lower values provide faster updates but increase network traffic. Default: 30 seconds. Recommended: 5-10 seconds for active use, 30+ seconds for minimal updates."
            },
            "enablePowerSwitch": {
              "title": "Enable Power Switch",
              "type": "boolean",
              "default": false,
              "description": "Add an optional HomeKit Switch service for power control. When enabled, a separate 'Sanremo Cube Power' switch will appear in HomeKit."
            },
            "filterLifeDays": {
              "title": "Filter Life (days)",
              "type": "integer",
              "default": 180,
              "minimum": 1,
              "maximum": 365,
              "description": "Expected filter life in days (1-365). Used to calculate filter maintenance reminders and track replacement dates. Default: 180 days. Adjust based on your water quality and usage."
            }
          }
        }
      }
    }
  },
  "layout": [
    {
      "type": "flex",
      "flex-flow": "row wrap",
      "items": [
        "name",
        "debugLogging"
      ]
    },
    {
      "key": "machines",
      "type": "array",
      "orderable": false,
      "buttonText": "Add Machine",
      "items": [
        "machines[].name",
        "machines[].type",
        "machines[].ip",
        "machines[].pollingInterval",
        "machines[].enablePowerSwitch",
        "machines[].filterLifeDays"
      ]
    }
  ]
}

